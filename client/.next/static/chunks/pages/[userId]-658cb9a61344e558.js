(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{1656:function(e,t,r){"use strict";var i=r(29),n=r(7794),c=r.n(n),a=r(7294),s=r(3964),l=r(5954),o=r(6993),u=r(1739),_=r.n(u),d=r(4184),f=r.n(d),p=r(6741),m=r(5893);t.Z=function(e){var t,r=e.article,n=(r.title,r.tags),u=(r.content,r.category),d=r.createTime,g=r.likeNum,x=(r.cover,r.comments,r._id),y=(0,s.NW)(),h=(0,l.Z)(),j=h.user,v=h.setUser,A=null===j||void 0===j||null===(t=j.articleIds)||void 0===t?void 0:t.includes(x),N=(0,a.useCallback)((0,i.Z)(c().mark((function e(){var t,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return",s.v0.error("\u52a8\u52a8\u624b\u6307\u767b\u5f55\u4e0b\u5427~"));case 2:if(t=j.articleIds,-1!==(i=t.indexOf(x))){e.next=12;break}return t.push(x),e.next=8,(0,p.Nq)(j._id,{articleIds:t});case 8:r.likeNum++,s.v0.success("\u6536\u85cf\u6210\u529f"),e.next=17;break;case 12:return t.splice(i,1),e.next=15,(0,p.Nq)(j._id,{articleIds:t});case 15:r.likeNum--,s.v0.success("\u5df2\u53d6\u6d88\u6536\u85cf");case 17:y(),v(j);case 19:case"end":return e.stop()}}),e)}))),[j,x]);return(0,m.jsxs)("ul",{className:_().detail,children:[(0,m.jsxs)("li",{className:_().categoryBox,children:[(0,m.jsx)(o.Z,{type:"icon-category"})," ",(0,m.jsx)("span",{className:_().category,children:u})]}),(0,m.jsxs)("li",{className:_().tagBox,children:[(0,m.jsx)(o.Z,{type:"icon-tags"}),n&&n.length>0&&n.map((function(e){return(0,m.jsx)("span",{className:_().tag,children:e},e)}))]}),(0,m.jsxs)("li",{className:_().dateBox,children:[(0,m.jsx)(o.Z,{type:"icon-ico-date"}),(0,m.jsx)("span",{className:_().date,children:(0,s.m8)(d)})]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(o.Z,{onClick:N,className:f()(_().like,{"color-red":A}),type:"icon-like"}),(0,m.jsx)("span",{className:_().likeNum,children:g})]})]})}},7493:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var i=r(29),n=r(7794),c=r.n(n),a=r(7294),s=r(3964),l=r(4078),o=r.n(l),u=r(4184),_=r.n(u),d=r(1656),f=r(7175),p=r.n(f),m=r(5893),g=function(e){return(0,m.jsx)("div",{className:p().empty,children:"\u65e0\u5185\u5bb9"})},x=r(1163),y=r(5694),h=r(98);function j(e){return e.replace(/\<.+?\>/g,"")}var v=function(e){var t=e.api,r=(0,h.Z)(t),n=r.run,l=r.list,u=r.loading,f=r.page,p=r.total,v=r.pageSize,A=r.setSearchAndRun,N=(0,a.useState)(!0),b=(N[0],N[1]),k=(0,x.useRouter)(),O=(0,a.useCallback)((0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),[n]);(0,a.useEffect)((function(){O()}),[(0,s.X6)(k.query),O]),(0,a.useEffect)((function(){u||window.scrollTo({top:Number(sessionStorage.getItem("scrollTop")||0)})}),[u]);var w=(0,a.useCallback)((function(e){sessionStorage.setItem("scrollTop",window.pageYOffset.toString()),k.push("/article?id=".concat(e))}),[k]),D=(0,a.useRef)();return(0,a.useEffect)((function(){var e=null;if(D.current)return e=setTimeout((function(){new IntersectionObserver((function(e){e.forEach((function(e){var t=f<Math.ceil(p/v);e.isIntersecting&&t&&(b(!1),sessionStorage.setItem("scrollTop",window.pageYOffset.toString()),A({pageSize:v+20}))}))})).observe(D.current)}),2e3),function(){clearTimeout(e)}}),[D.current,f,v,p]),(0,m.jsx)(y.Z,{loading:u,children:(0,m.jsx)("ul",{className:o().ul,children:l.length>0?(0,m.jsxs)(m.Fragment,{children:[l.map((function(e){var t=e._id,r=e.title,i=e.content,n=e.cover;e.category,e.tags,e.createTime;return(0,m.jsxs)("li",{className:o().li,children:[(0,m.jsxs)("div",{className:o().content,children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{onClick:function(){return w(t)},className:o().title,children:r}),(0,m.jsx)("span",{children:i.length>200?j(i.substring(0,50))+"[...]":j(i)})]}),n&&n.url?(0,m.jsx)(s.Ei,{className:_()(o().img),src:n.url}):null]}),(0,m.jsx)(d.Z,{article:e})]},t)})),f<Math.ceil(p/v)&&(0,m.jsx)("div",{className:o().loadMore,ref:D,children:"..."})]}):(0,m.jsx)(g,{})})})}},383:function(e,t,r){"use strict";r.r(t);var i=r(9499),n=r(1163),c=(r(7294),r(3964)),a=r(7493),s=r(4848),l=r.n(s),o=r(5893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e=(0,n.useRouter)();return(0,o.jsx)("div",{className:l().container,children:(0,o.jsx)(a.Z,{api:function(t){return(0,c.DA)(_(_({},t),{},{userId:e.query.userId}))}})})}},203:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[userId]",function(){return r(383)}])},1739:function(e){e.exports={categoryBox:"ArticleDetail_categoryBox__hUFBN",tagBox:"ArticleDetail_tagBox__f_bWj",detail:"ArticleDetail_detail__WAXvj",dateBox:"ArticleDetail_dateBox__ay2Es",container:"ArticleDetail_container__nas4z",articleContainer:"ArticleDetail_articleContainer__sBEDL",title:"ArticleDetail_title__mhedz",cover:"ArticleDetail_cover__GACPc",tag:"ArticleDetail_tag__0_BSF",category:"ArticleDetail_category__X2XYA",likeNum:"ArticleDetail_likeNum__UsOBM",date:"ArticleDetail_date__ykFJg",commentContainer:"ArticleDetail_commentContainer__3l1rF",commentTitle:"ArticleDetail_commentTitle__vYePf",replyContainer:"ArticleDetail_replyContainer__l7Ymo",empty:"ArticleDetail_empty__wA9Nr",like:"ArticleDetail_like__9_pD2"}},4078:function(e){e.exports={ul:"ArticleList_ul__8wGx_",li:"ArticleList_li__9yDY9",title:"ArticleList_title__uyQII",content:"ArticleList_content__k_zqp",img:"ArticleList_img__iYiPd",footer:"ArticleList_footer__3NaRg",category:"ArticleList_category__d4cyL",tag:"ArticleList_tag__MaMfE",createTime:"ArticleList_createTime__2yemA",empty:"ArticleList_empty__4QMkB",pageOperations:"ArticleList_pageOperations__yg59q",loadMore:"ArticleList_loadMore__fnhvr"}},7175:function(e){e.exports={empty:"Empty_empty__jAuf1"}},4848:function(e){e.exports={container:"index_container__Xi8tY"}}},function(e){e.O(0,[774,888,179],(function(){return t=203,e(e.s=t);var t}));var t=e.O();_N_E=t}]);